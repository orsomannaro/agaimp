"""
Subclass of Paramenters, which is generated by wxFormBuilder.
"""

import wx

from . import local_param
from .forms import agaimparam_form


class agaimparamParamenters(agaimparam_form.Paramenters):
    def __init__(self, parent):
        agaimparam_form.Paramenters.__init__(self, parent)
        self.Bind(wx.EVT_SHOW, self.OnLoadData)  # Collega l'evento Show

    def OnLoadData(self, event):
        """ Carica i parametri.
        """
        if event.Show:
            for key, value in local_param.params.items():
                if key in self.__dict__.keys():
                    self.__dict__[key].Value = value

    def OnSalvaClick(self, event):
        """ Salva i parametri.
        """
        #TODO: i valori dei parametri devono essere validati prima di salvarli
        for name in local_param.params.keys():
            if name in self.__dict__.keys():
                value = self.__dict__[name].Value
                local_param.params[name] = value
        local_param.save()
        self.Close()

    def OnAnnullaClick(self, event):
        self.Close()


def edit_param():
    """ Modifica dei parametri tramite form.
    """
    form = agaimparamParamenters(None)
    form.Show()
